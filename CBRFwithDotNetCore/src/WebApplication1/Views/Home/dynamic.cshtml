@using WebApplication1.Models
@*
    For more information on enabling MVC for empty projects, visit http://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
<html>
<head>
    <title>Изменение курса валют по датам</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#periods').change(function () {
                var _per = $(periods).find('option:selected').val();
                var _vals = $(valute).find('option:selected').val();
                var target = $("#results");
                target.empty();
                $.ajax({
                    type: "POST",
                    url: "@Url.Action("LoadCurses", "Select")",
                    data: {
                        "valName": _vals,
                        "period": _per
                    },
                    async: false,
                    success: function (data) {
                        //alert(data);
                        var json = $.parseJSON(data);
                        target.append("<table border=\"1\" cellpadding=\"7\" cellspacing=\"0\">");
                        target.append("<tr><td align=\"center\"><ins><b>Дата</b></ins></td><td align=\"center\"><ins><b>Стоимость в рублях</b></ins></br></td></tr>");
                        for (var i = 0; i < json.length; ++i) {
                            target.append("<tr><td align=\"center\">" + json[i].day + "</td><td align=\"center\">"
                        + json[i].curse + "</td></tr>");
                        }
                        target.append("</table>");
                    },
                    dataType: 'html',
                    error: function (data) {
                        alert("Ошибка при запросе:" + data);
                    }
                });

            });
        });
    </script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#valute').change(function () {
                var _per = $(periods).find('option:selected').val();
                var _vals = $(valute).find('option:selected').val();
                var target = $("#results");
                target.empty();
                $.ajax({
                    type: "POST",
                    url: "@Url.Action("LoadCurses", "Select")",
                    data: {
                        "valName": _vals,
                        "period": _per
                    },
                    async: false,
                    success: function (data) {
                        //alert(data);
                        var json = $.parseJSON(data);
                        target.append("<table border=\"1\" cellpadding=\"7\" cellspacing=\"0\">");
                        target.append("<tr><td align=\"center\"><ins><b>Дата</b></ins></td><td align=\"center\"><ins><b>Стоимость в рублях</b></ins></br></td></tr>");
                        for (var i = 0; i < json.length; ++i) {
                            target.append("<tr><td align=\"center\">" + json[i].day + "</td><td align=\"center\">"
                        + json[i].curse + "</td></tr>");
                        }
                        target.append("</table>");
                    },
                    dataType: 'html',
                    error: function (data) {
                        alert("Ошибка при запросе:" + data);
                    }
                });

            });
        });
    </script>
    <style>
        .design {
            display: inline-block; /* Строчно-блочный элемент */
            padding: 5px 20px; /* Добавляем поля */
            text-decoration: none; /* Убираем подчёркивание у ссылки */
            cursor: pointer; /* Курсор в виде руки */
            background: #deefff; /* Фон для браузеров, не поддерживающих градиент */
            /* Градиент */
            background: -moz-linear-gradient(top, #deefff 0%, #98bede 100%);
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#deefff), color-stop(100%,#98bede));
            background: -webkit-linear-gradient(top, #deefff 0%,#98bede 100%);
            background: -o-linear-gradient(top, #deefff 0%,#98bede 100%);
            background: -ms-linear-gradient(top, #deefff 0%,#98bede 100%);
            background: linear-gradient(top, #deefff 0%,#98bede 100%);
            border-radius: 10px; /* Скругляем уголки */
            border: 1px solid #008; /* Добавляем синюю рамку */
            font: 12px/1 Arial, sans-serif; /* Рубленый шрифт */
            color: #2c539e; /* Цвет текста и ссылки */
        }
    </style>
</head>

<body>
    <center>
        <hr>
        <a href="/Home/Index/" class="design">Начальная страница</a>
        <a href="/Home/Dynamic/" class="design">График</a>
        <a href="/Home/Convert/" class="design">Конвертер</a>
        <a href="/Home/Settings/" class="design">Настройки</a>
        <hr>
    </center>

    <h3>Изменение курса валют по датам</h3>

    <select id="valute" name="valSelection">
        @foreach (string val in (List<string>) ViewBag.SelectList)
        {
            <option>@val</option>
        }
    </select>

    <select id="periods" name="periodSelection">
        <option>Неделя</option>
        <option>Месяц</option>
        <option>Квартал</option>
        <option>Год</option>
    </select>

    @*Сюда выводятся даты с курсами*@
    <div id="results"></div>

</body>
</html>